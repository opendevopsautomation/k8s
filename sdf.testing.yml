---
version: 0.1
testSuiteTimeout: 10
testSuiteStep: 8

base:
  yamls:
    - ./level1/base1.yaml

runson: win
autosplit: true
retryOnFailure: false
maxRetries: 5
concurrency: 2

env:
  CACHE_DIR: m2_cache_dir

preDirectives:
  commands:
    - pwd
    - echo yaml/level0/main.yaml
    - echo yaml/level0/level1/base1.yaml
    - mvn dependency:resolve

postDirectives:
  commands:
    - ls
    - pwd

mergeArtifacts: false

uploadArtefacts:
 - name: ExecutionSnapshots
   path:
    - target/surefire-reports/html/**

testDiscovery:
  type: raw
  command: grep 'test name' xml/testng_win.xml | awk '{print$2}' | sed 's/name=//g' | sed 's/\x3e//g'

testRunnerCommand: mvn test `-Dplatname=win `-Dmaven.repo.local=./.m2 dependency:resolve `-DselectedTests=$test
